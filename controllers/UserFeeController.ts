import { Request, Response, NextFunction } from 'express'import { UserFeeModel } from '../models/UserFeeModel.js'import { HttpError } from '../core/HttpError.js'export class UserFeeController {  async adminGetUserFees(req: Request, res: Response, next: NextFunction) {    try {      const userId = Number(req.params.userId)      if (!userId) throw new HttpError(400, 'InvalidUserId')      const fees = await UserFeeModel.getByUserId(userId)      return res.json({ ok: true, fees: fees || null })    } catch (err) {      next(err)    }  }  async adminSetUserFees(req: Request, res: Response, next: NextFunction) {    try {      const userId = Number(req.params.userId)      if (!userId) throw new HttpError(400, 'InvalidUserId')      const {        pixInPercent,        pixOutPercent,        pixInFeeType,        pixInFeeValue,        pixOutFeeType,        pixOutFeeValue      } = req.body      const fees = await UserFeeModel.upsertForUser(userId, {        pixInPercent: Number(pixInPercent || 0),        pixOutPercent: Number(pixOutPercent || 0),        pixInFeeType,        pixInFeeValue: Number(pixInFeeValue || 0),        pixOutFeeType,        pixOutFeeValue: Number(pixOutFeeValue || 0)      })      return res.json({ ok: true, fees })    } catch (err) {      next(err)    }  }  async internalGetUserFees(req: Request, res: Response, next: NextFunction) {    try {      const userId = Number(req.params.userId)      if (!userId) throw new HttpError(400, 'InvalidUserId')      const fees = await UserFeeModel.getByUserId(userId)      return res.json({ ok: true, fees: fees || null })    } catch (err) {      next(err)    }  }  async getMyFees(req: Request, res: Response, next: NextFunction) {    try {      const userId = req.user?.id      if (!userId) throw new HttpError(401, 'Unauthorized')      const fees = await UserFeeModel.getByUserId(userId)      return res.json({ ok: true, fees: fees || null })    } catch (err) {      next(err)    }  }}export const userFeeController = new UserFeeController()